define(["ember"],function(e){var t=e.View.extend({mapOptions:{center:new google.maps.LatLng(37.222,23.1223),zoom:4,mapTypeId:google.maps.MapTypeId.ROADMAP},init:function(){this._super.apply(this,arguments),this.set("marker","")},didInsertElement:function(){this.drawMap()},drawMap:function(){var e=this,t=this.get("lat"),n=this.get("lng"),r=this.get("centreLat"),i=this.get("centreLng"),s,o,u=new google.maps.Map(this.$().get(0),this.get("mapOptions")),a=!!t&&!!n;a?(o=new google.maps.LatLng(t,n),s=new google.maps.Marker({position:o,map:u}),u.setCenter(o),e.set("marker",s)):r&&i&&(o=new google.maps.LatLng(r,i),u.setCenter(o)),this.setupMarkerCreation(u)},setupMarkerCreation:function(e){var t=this;google.maps.event.addListener(e,"click",function(n){var r=t.get("marker"),i;r&&r.setMap(null),i=new google.maps.Marker({position:n.latLng,map:e}),t.set("marker",i)})},markerDidChange:function(){if(this.get("marker")){var e=this.marker.position.lat(),t=this.marker.position.lng();this.set("lat",e),this.set("lng",t)}}.observes("this.marker"),latLngDidChange:function(){this.drawMap()}.observes("this.centreLat","this.centreLng")});return t});