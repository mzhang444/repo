define(["ember"],function(e){var t=e.View.extend({classNames:["dropzone","height100"],didInsertElement:function(){var e=this.get("elementId"),t=new Dropzone("#"+e,{url:"router.php",paramName:"uploadedFile",addRemoveLinks:!0,acceptedFiles:"image/*"});this.setupEventHandlers(t)},setupEventHandlers:function(e){e.on("sending",$.proxy(this.beforeUploadToServer,this)),e.on("success",$.proxy(this.afterSuccessfulUploadToServer,this)),e.on("removedfile",$.proxy(this.removeFileOnServer,this))},beforeUploadToServer:function(e,t,n){var r=(new Date).getTime();n.append("imageNum",r),n.append("type","imageUpload"),e.imageNum=r},afterSuccessfulUploadToServer:function(e,t){var n=JSON.parse(t);e.serverID=n.photoID,this.get("imageIDs").push(n.photoID)},removeFileOnServer:function(e){if(!e.serverID)return;var t,n,r=this.get("imageIDs");for(t=0,n=r.length;t<n;t++)if(r[t]===e.serverID){this.get("imageIDs").splice(t,1);break}}});return t});