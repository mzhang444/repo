define(["ember","jquery"],function(e,t){var n=e.View.extend({map:null,markers:"",init:function(){var e=this;this._super.apply(this,arguments),this.set("markers",[]),t.subscribe("updateMapMarkers",t.proxy(this.updateMap,this))},clearOldMarkers:function(){this.get("markers").forEach(function(e){e.setMap(null)}),this.get("markers").clear()},createMarkers:function(e){var t=this,n,r;e.forEach(function(e){n=new google.maps.LatLng(e[0],e[1]),r=new google.maps.Marker({position:n,map:t.get("map")}),t.get("markers").pushObject(r)})},updateMap:function(e,t){this.clearOldMarkers(),this.createMarkers(t)},didInsertElement:function(){var e,n={zoom:2,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,center:new google.maps.LatLng(-34.397,150.644),streetViewControl:!1};e=new google.maps.Map(this.$().get(0),n),google.maps.event.addListener(e,"bounds_changed",t.proxy(this.mapBoundariesChanged,this,e)),this.set("map",e)},mapBoundariesChanged:function(e){var t={lat1:e.getBounds().getNorthEast().lat(),lat2:e.getBounds().getSouthWest().lat(),lng1:e.getBounds().getNorthEast().lng(),lng2:e.getBounds().getSouthWest().lng(),zoom:e.getZoom()};this.get("controller").send("updateDisplay",t)}});return n});