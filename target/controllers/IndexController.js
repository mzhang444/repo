define(["ember","models/Crisis","models/Claim","models/Evidence","utils/utils","jquery"],function(e,t,n,r,i,s){var o=e.ObjectController.extend({recent:"",top:"",markers:"",init:function(){var t=this,r,s,o;r=e.ArrayProxy.create({content:[]}),s=e.ArrayProxy.create({content:[]}),o=e.ArrayProxy.create({content:[]}),this.set("recent",r),this.set("top",s),this.set("markers",o);var u={type:"getPoints"},a=function(e){var r,i;for(i=0;i<3;i+=1)r=n.create(e.list[i]),r.set("id",r.get("elementID")),t.get("top").pushObject(r);for(i=3;i<6;i+=1)r=n.create(e.list[i]),r.set("id",r.get("elementID")),t.get("recent").pushObject(r)};i.ajax.makeAJAXPostCall("router.php",u,a)},createInfoType:function(e){var i=e.type,s=e.elementID,o;return delete e.type,delete e.elementID,i==="crisis"?o=t.create(e):i==="claim"?o=n.create(e):i==="evidence"&&(o=r.create(e)),o&&o.set("id",s),o},actions:{updateDisplay:function(e){var t=this,n=s.extend(e,{type:"getPoints"}),r=function(e){var n,r;t.get("top").clear(),t.get("recent").clear(),t.get("markers").clear();var i=Math.floor(Math.random()*5);for(r=0;r<i;r+=1)n=t.createInfoType(e.list[r]),t.get("top").pushObject(n),t.get("markers").pushObject([n.get("lat"),n.get("lng")]);for(r=i;r<i*2;r+=1)n=t.createInfoType(e.list[r]),t.get("recent").pushObject(n),t.get("markers").pushObject([n.get("lat"),n.get("lng")]);s.publish("updateMapMarkers",t.get("markers"))};i.ajax.makeAJAXPostCall("router.php",n,r)}}});return o});