define(["ember","models/Errors","utils/utils"],function(e,t,n){var r=e.ObjectController.extend({citiesDataSource:"js/utils/resources/cities.json",needs:["claim","application"],error:"",city:"",imageIDs:"",init:function(){this.set("imageIDs",[]),this.set("city",""),this.set("error",t.create()),this._super.apply(this,arguments)},addEvidence:function(){debugger;var e=this,t={type:"evidenceCreate",crisisID:this.get("parentCrisisID"),claimID:this.get("parentClaimID"),title:this.get("title"),descr:this.get("descr"),support:~~this.get("support"),lat:this.get("lat"),lng:this.get("lng"),street:this.get("street"),cityID:this.get("cityID"),images:this.get("imageIDs"),countryID:this.get("countryID")},r=n.validatePayload(t),i=n.ERRORS.get("VALIDATION_ERR_CODE"),s=function(t){var r=n.ERRORS.get("EVIDENCE_ERR_CODE"),i=n.ERRORS.get("EVIDENCE_ERR_MSG");t.error?e.error.addError(r,i):(e.error.resolveError(r),e.set("model.id",t.ID),e.transitionToRoute("evidence",e.get("model")))};debugger;r.valid?(this.error.resolveError(i),n.ajax.makeAJAXPostCall("router.php",t,s)):this.error.addError(i,r.message)},updateLocationInfo:function(t){n.assert(!e.isNone(t),"Location Info is undefined!"),this.set("lat",t.lat),this.set("lng",t.lng),this.set("country",t.country),this.set("countryID",t.countryID),this.set("cityID",t.id)},userCanCreate:function(){return this.get("controllers.application.user.isLoggedIn")}.property("controllers.application.user.isLoggedIn"),parentClaimName:function(){return this.get("controllers.claim.title")}.property("controllers.claim.title"),mapCentreLat:function(){var e=this.get("centreLat")||this.get("controllers.claim.lat");return e}.property("controllers.claim.title","this.centreLat"),mapCentreLng:function(){var e=this.get("centreLng")||this.get("controllers.claim.lng");return e}.property("controllers.claim.title","this.centreLng"),parentCrisisID:function(){return this.get("controllers.claim.crisisID")}.property("controllers.claim.crisisID"),parentClaimID:function(){return this.get("controllers.claim.claimID")}.property("controllers.claim.claimID"),close:function(){var e=this.get("controllers.claim.content");this.transitionToRoute("claim",e)},support:function(){return!!this.get("controllers.claim.evidSupport")}.property("controllers.claim.evidSupport"),geoData:function(){return this.get("controllers.application.geoData")}.property("controllers.application.geoData")});return r});