define(["jquery","utils/utils","ember"],function(e,t,n){var r,i=!1,s,o,u,a={};return i=function(){try{return"localStorage"in window&&window.localStorage!==null?(r=window.localStorage,!0):!1}catch(e){return!1}}(),u=function(e,u,a){t.assert(!n.isNone(u),"no callback defined"),t.assert(!n.isNone(e),"empty IDlist array"),t.assert(!n.isNone(a),"type of items not defined");var f,l,c,h=[],p=[],d;c=function(e){e.forEach(function(e){r[f+e.ID]=JSON.stringify(e),h.push(e)}),u(h)};switch(a){case"tag":d=s,f="tag.";break;case"author":d=o,f="autor.";break;default:t.assert(!1,"Unsupported type")}i?(e.forEach(function(e){l=r[f+e],l?h.push(JSON.parse(l)):p.push(e)}),p.length?d(c,p):u(h)):d(c,e)},a.getAuthors=function(e,t){u(e,t,"author")},a.getTags=function(e,t){u(e,t,"tag")},s=function(e){var n,r={type:"tagsGetListBrief"};n=function(t){e(t.list)},t.ajax.makeAJAXPostCall("router.php",r,n)},a.getAllTags=function(e){return s(e)},o=function(e,n){var r,i={type:"usersBrief",userIDs:n};r=function(t){e(t.list)},t.ajax.makeAJAXPostCall("router.php",i,r)},a.resolveGeoData=function(t){e.get("js/utils/resources/cities.txt",function(n){t(e.parseJSON(n))})},a});