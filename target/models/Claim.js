define(["ember","models/AuthorInfoMixin","models/StatsMixin","models/LocationMixin","models/Evidence","utils/utils","utils/store"],function(e,t,n,r,i,s,o){var u=e.Object.extend(t,n,r,{isEdit:"",evidSupport:"",author:"",authorID:"",id:"",crisisID:"",claimID:e.computed.alias("id"),descr:"",evidences:null,tags:"",title:"",init:function(){this.evidences=e.ArrayProxy.create({content:[]}),this.tagList=e.ArrayProxy.create({content:[]}),this._super()},loadEvidences:function(){var e=this,t={type:"claimGetEvidences",claimID:this.get("claimID")},n=function(t){t.error||(t.list.forEach(function(t){var n=i.create();s.setModelProperties(n,t),e.evidences.addObject(n)},this),e.loadAuthors())};s.ajax.makeAJAXPostCall("router.php",t,n)},loadAuthors:function(){var e=this,t=[],n;t.push(this.authorID),n=function(t){var n,r=t.length;if(t)for(n=0;n<r;n+=1)if(t[n].ID===e.authorID){e.set("author",t[n]);break}},o.getAuthors(t,n)},saveClaimToServer:function(t){s.assert(!e.isNone(t),"Callback is not defined");var n={type:"claimCreate",crisisID:this.get("crisisID"),title:this.get("title"),descr:this.get("descr"),lat:this.get("lat"),lng:this.get("lng"),street:this.get("street"),cityID:this.get("cityID"),countryID:this.get("countryID"),tags:[]},r=function(e){e.error||t&&t(e.ID)};s.ajax.makeAJAXPostCall("router.php",n,r)}});return u});