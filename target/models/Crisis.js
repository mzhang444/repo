define(["ember","models/Claim","models/StatsMixin","models/LocationMixin","utils/utils","utils/store"],function(e,t,n,r,i,s){var o=e.Object.extend(n,r,{isEdit:"",claims:"",id:"",author:"",crisisID:e.computed.alias("id"),descr:"",title:"",init:function(){this.claims=e.ArrayProxy.create({content:[]})},loadClaims:function(){var e=this,n={type:"crisisGetClaims",crisisID:this.get("crisisID")},r=function(n){n.error||(n.list.forEach(function(n){var r=t.create();i.setModelProperties(r,n),e.claims.addObject(r)},this),e.loadAuthors(),e.loadTags())};i.ajax.makeAJAXPostCall("router.php",n,r)},loadAuthors:function(){var e=this,t=[],n;this.claims.forEach(function(e){t.push(e.authorID)}),n=function(t){var n,r;if(t)for(n=0;n<t.length;n+=1)r=e.claims.filterProperty("authorID",t[n].ID),r.forEach(function(e){e.setProperties({author:t[n]})})},s.getAuthors(t,n)},loadTags:function(){var e=this,t=[],n;this.claims.forEach(function(e){e.tags&&e.tags.forEach(function(e){t.push(e)})}),n=function(t){t&&t.forEach(function(t){e.claims.forEach(function(e){e.tags&&e.tags.contains(t.ID)&&e.tagList.pushObject(t)})})},s.getTags(t,n)}});return o});